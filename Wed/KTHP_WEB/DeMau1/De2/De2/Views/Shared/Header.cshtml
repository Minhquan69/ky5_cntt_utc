<!-- header -->
<div class="agileits_header">
	<div class="container">
		<div class="w3l_offers">
			<p>Đào Minh Quân - Mã sinh viên: 221230966 . <a href="products.html">SHOP NOW</a></p>
		</div>
		<div class="agile-login">
			<ul>
				<li><a asp-action="SignUp"> Create Account </a></li>
				<li><a href="login.html">Login</a></li>
				<li><a href="contact.html">Help</a></li>

			</ul>
		</div>
		<div class="product_list_header">
			<form action="#" method="post" class="last">
				<input type="hidden" name="cmd" value="_cart">
				<input type="hidden" name="display" value="1">
				<button class="w3view-cart" type="submit" name="submit" value=""><i class="fa fa-cart-arrow-down" aria-hidden="true"></i></button>
			</form>
		</div>
		<div class="clearfix"> </div>
	</div>
</div>

<div class="logo_products">
	<div class="container">
		<div class="w3ls_logo_products_left1">
			<ul class="phone_email">
				<li><i class="fa fa-phone" aria-hidden="true"></i>Order online or call us : (+0123) 234 567</li>

			</ul>
		</div>
		<div class="w3ls_logo_products_left">
			<h1><a href="index.html">Đào Minh Quân</a></h1>
		</div>
		<div class="w3l_search">
			<input type="search" name="Search" placeholder="Search for a Product..." required="">
			<button type="submit" class="btn btn-default search" aria-label="Left Align" onclick="loadData()">
				<i class="fa fa-search" aria-hidden="true"> </i>
			</button>
			<div class="clearfix"></div>
		</div>

		<div class="clearfix"> </div>
	</div>
</div>
<!-- //header -->
<script src="../De2/js/jquery-1.11.1.min.js"></script>
<script type="text/javascript">
    function loadData() {
        const keyword = $('input[name="Search"]').val().trim(); // Lấy giá trị tìm kiếm từ input

        // Không yêu cầu nhập từ khóa
        $.ajax({
            url: '@Url.Action("GetData", "Home")',
            type: 'GET',
            data: { name: keyword }, // Nếu keyword rỗng thì vẫn gửi request
            success: function (response) {
                let html = '';

                if (Array.isArray(response) && response.length > 0) {
                    html += '';
                    response.forEach(function (item, index) {
                        html += `
                            <div class="col-md-3 top_brand_left-1">
                                <div class="hover14 column">
                                    <div class="agile_top_brand_left_grid">
                                        <div class="agile_top_brand_left_grid_pos">
                                                <img src="../De2/images/offer.png" alt="Offer" class="img-responsive">
                                        </div>
                                        <div class="agile_top_brand_left_grid1">
                                            <figure>
                                                <div class="snipcart-item block">
                                                    <div class="snipcart-thumb">
                                                        <a href="products.html">
                                                            <img src="../De2/images/${item.image}" alt="${item.name}" class="img-responsive">
                                                        </a>
                                                        <p>${item.name}</p>
                                                        <div class="stars">
                                                            <i class="fa fa-star blue-star" aria-hidden="true"></i>
                                                            <i class="fa fa-star blue-star" aria-hidden="true"></i>
                                                            <i class="fa fa-star blue-star" aria-hidden="true"></i>
                                                            <i class="fa fa-star gray-star" aria-hidden="true"></i>
                                                        </div>
                                                        <h4>${item.unitPrice} <span>$55.00</span></h4>
                                                    </div>
                                                    <div class="snipcart-details top_brand_home_details">
                                                           <form action="#" method="post">
                                        <fieldset>
                                            <input type="hidden" name="cmd" value="_cart">
                                            <input type="hidden" name="add" value="1">
                                            <input type="hidden" name="business" value=" ">
                                            <input type="hidden" name="item_name" value="Fortune Sunflower Oil">
                                            <input type="hidden" name="amount" value="35.99">
                                            <input type="hidden" name="discount_amount" value="1.00">
                                            <input type="hidden" name="currency_code" value="USD">
                                            <input type="hidden" name="return" value=" ">
                                            <input type="hidden" name="cancel_return" value=" ">
                                            <input type="submit" name="submit" value="Add to cart" class="button">
                                        </fieldset>
                                    </form>
                                                    </div>
                                                </div>
                                            </figure>
                                        </div>
                                    </div>
                                </div>
                            </div>`;

                        if ((index + 1) % 4 === 0) {
                            html += '';
                        }
                    });
                    html += '</div>'; // Đóng thẻ cuối cùng
                } else {
                    html = '<p>Không tìm thấy sản phẩm nào!</p>';
                }

                $('.agile_top_brands_grids').html(html); // Hiển thị sản phẩm
            },
            error: function () {
                alert('Đã xảy ra lỗi, vui lòng thử lại!');
            }
        });
    }

</script>
